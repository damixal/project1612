<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - User Management</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <link rel="stylesheet" href="src/css/style.css">
</head>
<body>
    <div class="container">
        <div class="card">
            <header class="page-header">
                <a href="home.html" class="header-icon"><i class="fa-solid fa-house"></i></a>
                <h1 class="page-title">Admin Panel</h1>
                <div style="width: 25px;"></div>
            </header>

            <div class="admin-section">
                <h2>User Management</h2>
                <div class="admin-actions">
                    <button id="addUserBtn" class="btn btn-primary">
                        <i class="fas fa-user-plus"></i> Add New User (Modal)
                    </button>
                    <a href="create-user.html" class="btn btn-success">
                        <i class="fas fa-plus-circle"></i> Quick Create User
                    </a>
                </div>
                
                <div class="admin-stats">
                    <div class="stat-card">
                        <h3>Total Users</h3>
                        <p id="totalUsers" class="stat-number">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Admins</h3>
                        <p id="adminCount" class="stat-number">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>RQ Users</h3>
                        <p id="rqCount" class="stat-number">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Members</h3>
                        <p id="memberCount" class="stat-number">0</p>
                    </div>
                </div>
                
                <div class="search-filter">
                    <input type="text" id="userSearch" placeholder="Search users by name..." class="search-input">
                    <select id="roleFilter" class="filter-select">
                        <option value="">All Roles</option>
                        <option value="MEC_OIC_ADMIN">Admin</option>
                        <option value="RQ">RQ</option>
                        <option value="MEMBER">Member</option>
                    </select>
                </div>
                
                <div id="usersList" class="users-list">
                    <!-- Users will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Add User Modal -->
    <div id="addUserModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Add New User</h2>
            <form id="addUserForm">
                <div class="form-group">
                    <label for="adminUserName">Name:</label>
                    <input type="text" id="adminUserName" placeholder="Full Name" required>
                </div>
                
                <div class="form-group">
                    <label for="adminUserPassword">Password:</label>
                    <input type="password" id="adminUserPassword" placeholder="Password" required>
                    <small class="form-help">Minimum 6 characters</small>
                </div>
                
                <div class="form-group">
                    <label for="adminUserRank">Rank:</label>
                    <select id="adminUserRank" required>
                        <option value="" disabled selected>Select Rank</option>
                        <option value="REC">REC</option>
                        <option value="PTE">PTE</option>
                        <option value="LCP">LCP</option>
                        <option value="CPL">CPL</option>
                        <option value="CFC">CFC</option>
                        <option value="3SG">3SG</option>
                        <option value="2SG">2SG</option>
                        <option value="1SG">1SG</option>
                        <option value="SSG">SSG</option>
                        <option value="MSG">MSG</option>
                        <option value="3WO">3WO</option>
                        <option value="2WO">2WO</option>
                        <option value="1WO">1WO</option>
                        <option value="MWO">MWO</option>
                        <option value="SWO">SWO</option>
                        <option value="CWO">CWO</option>
                        <option value="2LT">2LT</option>
                        <option value="LTA">LTA</option>
                        <option value="CPT">CPT</option>
                        <option value="MAJ">MAJ</option>
                        <option value="LTC">LTC</option>
                        <option value="COL">COL</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="adminUserPhone">Phone Number:</label>
                    <input type="tel" id="adminUserPhone" placeholder="Phone Number (8 digits)" required pattern="[0-9]{8}">
                    <small class="form-help">Exactly 8 digits</small>
                </div>
                
                <div class="form-group">
                    <label for="adminUserRole">Role:</label>
                    <select id="adminUserRole" required>
                        <option value="" disabled selected>Select Role</option>
                        <option value="MEMBER">Member (Individual Soldier)</option>
                        <option value="RQ">RQ</option>
                        <option value="MEC_OIC_ADMIN">MEC OIC Admin</option>
                    </select>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelAddUser">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create User</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div id="editUserModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <span class="close-button edit-close">&times;</span>
            <h2>Edit User</h2>
            <form id="editUserForm">
                <input type="hidden" id="editUserId">
                
                <div class="form-group">
                    <label>Name:</label>
                    <input type="text" id="editUserName" readonly class="readonly-field">
                </div>
                
                <div class="form-group">
                    <label>Rank:</label>
                    <input type="text" id="editUserRank" readonly class="readonly-field">
                </div>
                
                <div class="form-group">
                    <label>Phone:</label>
                    <input type="text" id="editUserPhone" readonly class="readonly-field">
                </div>
                
                <div class="form-group">
                    <label for="editUserRole">Role:</label>
                    <select id="editUserRole" required>
                        <option value="" disabled selected>Select Role</option>
                        <option value="MEMBER">Member (Individual Soldier)</option>
                        <option value="RQ">RQ</option>
                        <option value="MEC_OIC_ADMIN">MEC OIC Admin</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="editUserPassword">Reset Password (Optional):</label>
                    <input type="password" id="editUserPassword" placeholder="Leave blank to keep current password">
                    <small class="form-help">Only enter if you want to change the password</small>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelEditUser">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Confirm Delete Modal -->
    <div id="confirmDeleteModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Confirm Delete</h2>
            <p id="deleteMessage">Are you sure you want to delete this user?</p>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" id="cancelDelete">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmDelete">Delete User</button>
            </div>
        </div>
    </div>

    <script src="src/js/role-management.js"></script>
    <script src="src/js/admin-panel.js"></script>
</body>
</html>